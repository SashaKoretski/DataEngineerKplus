# Тестовое задание от Направления разработки систем управления большими данными

## Описание задачи
Вам предстоит установить Apache Spark локально на своей домашней машине, научиться запускать Spark-задачи на языке Scala, разработать и запустить Spark-задачу для вычисления требуемых показателей на предоставленных данных.

## Описание данных
Данные представляют из себя учебную модель пользовательских сессий системы КонсультантПлюс. Под сессией понимается последовательность действий пользователя в системе КонсультантПлюс между открытием и закрытием системы. В сессиях обязательно присутствуют события начала и конца сессии – SESSION_START и SESSION_END. События быстрого поиска – QS и карточки поиска – CARD_SEARCH_START. Быстрый поиск – это поиск документов через поисковую строку. Поиск документов через быстрый поиск характеризуется текстом запроса и списком найденных документов. Карточка поиска – это поиск документов по различным параметрам. Поиск документов через карточку поиска характеризуется списком заданных параметров (каждый параметр описывается идентификатором и значением этого параметра в конкретном поиске) и списком найденных документов. Так же в сессиях могут присутствовать события открытия документа DOC_OPEN. Открытие документа должно обязательно соответствовать какому-то поиску. Каждому документу соответствует идентификатор вида <БАЗА>_<НОМЕР ДОКУМЕНТА>, например: PGU_13, ACC_45614, LAW_221940 и т.п.

## Описание технологического стека
| Компонент            | Версия       | Описание                                  |
|----------------------|--------------|-------------------------------------------|
| JDK                  | 11           | Основная платформа исполнения             |
| Apache Spark         | 3.3.0        | Обработка данных и агрегация              |
| Scala                | 2.12.18      | Язык разработки                           |
| Apache Maven         | 3.9.9        | Сборка проекта и управление зависимостями |
| IntelliJ IDEA CE     | 2025.1.1     | Среда разработки                          |
| log4j                | 2.17.2       | Логирование                               |
| SLF4J                | 1.7.32       | Интерфейс логирования                     |
| exec-maven-plugin    | 3.1.0        | Запуск Scala-кода через Maven             |
| scala-maven-plugin   | 4.5.6        | Компиляция Scala-кода                     |

## Установка и запуск проекта
1. Установите проект с GitHub:
- создайте папку под проект на своем ПК;
- инициализируйте локальный репозиторий в этой папке (здесь и далее предоставлены команды для командной стоки):
<pre> git init </pre>
- привяжите локальный репозиторий к этому глобальному репозиторию:
<pre> git remote add origin ссылка_на_этот_git </pre>
- перенесите проект на свой ПК:
<pre> git pull origin main </pre>
2. Установите все необходимые компоненты из технического стека выше.
3. Перейдите в папку, в которой находится файл pom.xml и папка src.
4. Скомпилируйте приложение:
<pre> mvn compile </pre>
5. Запустите приложение:
<pre> mvn exec:java "--define=exec.mainClass=org.example.MainApp" </pre>

Перенос проекта, компиляция и чтение файлов после запуска приложения могут занять до нескольких минут.

## Работа в приложении
После запуска приложения, оно начнет чтение файлов, находящихся в папке Sessions. После прочтения всех файлов, появится меню следующего вида:
--- меню ---
При выборе пункта 1, выведется количество раз, когда в карточке производили поиск документа с идентификатором ACC_45616, то есть сколько раз документ с идентификатором ACC_45616 выпадал в списке найденных документов при событии карточки поиска.
При выборе пункта 2, в csv файл сохраняется количество открытий каждого документа, найденного через быстрый поиск за каждый день. Был выбран формат таблицы следующего вида:
| actionType      | searchType       | date         | documentId      | count |
|-----------------|------------------|--------------|-----------------|-------|
| OPEN            | QS               | 2020-01-01   | RLAW123-32367   | 1     |
| ...             | ...              | ...          | ...             | ...   |
| OPEN            | QS               | 2020-12-26   | LAW-330075      | 1     |
